from __future__ import absolute_import, unicode_literals\nimport os\nfrom celery import Celery\nfrom celery.schedules import crontab\n\nos.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"marketplace.settings\")\napp = Celery(\"marketplace\")\napp.config_from_object(\"django.conf:settings\", namespace=\"CELERY\")\napp.autodiscover_tasks()\n\n# Configuração de tasks periódicas\napp.conf.beat_schedule = {\n    'refresh-academic-scores': {\n        'task': 'apps.ingest.tasks.refresh_all_academic_scores',\n        'schedule': crontab(hour=4, minute=0, day_of_week='sunday'),  # Domingo 4h\n    },\n    'update-metrics-daily': {\n        'task': 'apps.ranking.tasks.update_metrics',\n        'schedule': crontab(hour=2, minute=0),  # Todo dia 2h\n    },\n}\n\napp.conf.timezone = 'America/Sao_Paulo'